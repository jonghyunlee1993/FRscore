<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>FR score calculator</title>

  <style type="text/css">
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg .tg-baqh{text-align:center;vertical-align:top}
  </style>

  <!-- Quick Start: CSS -->

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" ></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>


  <!-- Nav Bar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Fibrosis Risk Score calculator</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>

</head>
  
<body>
  <div class="inputs" style='margin-left: 20px; margin-top: 10px'>
    <h2>Submit your data</h2>
    <p>
      Introduce the AST, ALT, PLT score, and ultrasonography images <b>(png or jpg)</b>
      <br>
      <br>
      For stable prediction, 
      <br>
      - upload at least five images of ultrasonography images of a single patient.
      <br>
      - the range of AST, and ALT is 10~100. If the score exceeds the range, would be adjusted.
    </p>
      <!-- Inputs for our ML model -->
      <form action="{{ url_for('predict')}}" method="post" enctype="multipart/form-data">
        <input type="text" name="Age" placeholder="Age (optional)">
        <input type="text" name="AST" placeholder="AST (U/L)" required="required">
        <input type="text" name="ALT" placeholder="ALT (U/L)" required="required">
        <input type="text" name="PLT" placeholder="PLT (10^9/L)" required="required">
        <br>
        <br>
        <input type="file" name="file" accept="image/png, image/jpeg" style="width: 662px" multiple>
        <button type="submit" class="btn btn-primary btn-block btn-large">Submit</button>
      </form>
      <br>
      <br>
      <h3>FR score report</h3>
      <br>
      {{ session_id }}
      <br>
      <b> {{ prediction_text }} </b>
      <br>
      {{ fib4_metric }}
      <br>
      {{ apri_metric }} 
   </div>

   <br>

   <div style='margin-left: 20px; margin-top: 10px'>
    <h3>FR score threshold based on transient elastography (TE)</h3>
    <table class="tg" table-layout="fixed" width="50%">
      <thead>
        <tr>
          <th class="tg-0lax">TE target threshold</th>
          <th class="tg-0lax">FR score threshold</th>
          <th class="tg-0lax">AUROC</th>
          <th class="tg-0lax">Accuracy</th>
          <th class="tg-0lax">Sensitivity</th>
          <th class="tg-0lax">Specificity</th>
          <th class="tg-0lax">PPV</th>
          <th class="tg-0lax">NPV</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="tg-nrix">6</td>
          <td class="tg-nrix">1.855</td>
          <td class="tg-nrix">0.7615</td>
          <td class="tg-nrix">69.55</td>
          <td class="tg-nrix">65.62</td>
          <td class="tg-nrix">70.00</td>
          <td class="tg-nrix">65.12</td>
          <td class="tg-nrix">70.47</td>
        </tr>
        <tr>
          <td class="tg-nrix">7</td>
          <td class="tg-nrix">1.869</td>
          <td class="tg-nrix">0.7557</td>
          <td class="tg-nrix">69.06</td>
          <td class="tg-nrix">66.34</td>
          <td class="tg-nrix">70.62</td>
          <td class="tg-nrix">56.30</td>
          <td class="tg-nrix">78.62</td>
        </tr>
        <tr>
          <td class="tg-nrix">8</td>
          <td class="tg-nrix">1.873</td>
          <td class="tg-nrix">0.7958</td>
          <td class="tg-nrix">71.22</td>
          <td class="tg-nrix">71.43</td>
          <td class="tg-nrix">71.13</td>
          <td class="tg-nrix">51.72</td>
          <td class="tg-nrix">85.19</td>
        </tr>
        <tr>
          <td class="tg-nrix">9</td>
          <td class="tg-nrix">1.873</td>
          <td class="tg-nrix">0.8083</td>
          <td class="tg-nrix">71.94</td>
          <td class="tg-nrix">76.39</td>
          <td class="tg-nrix">70.39</td>
          <td class="tg-nrix">47.41</td>
          <td class="tg-nrix">89.51</td>
        </tr>
        <tr>
          <td class="tg-nrix">10</td>
          <td class="tg-nrix">1.908</td>
          <td class="tg-nrix">0.8326</td>
          <td class="tg-nrix">75.90</td>
          <td class="tg-nrix">79.03</td>
          <td class="tg-nrix">75.00</td>
          <td class="tg-nrix">47.57</td>
          <td class="tg-nrix">92.57</td>
        </tr>
        <tr>
          <td class="tg-nrix">11</td>
          <td class="tg-nrix">1.932</td>
          <td class="tg-nrix">0.8411</td>
          <td class="tg-nrix">76.62</td>
          <td class="tg-nrix">80.39</td>
          <td class="tg-nrix">75.77</td>
          <td class="tg-nrix">42.71</td>
          <td class="tg-nrix">94.51</td>
        </tr>
        <tr>
          <td class="tg-nrix">12</td>
          <td class="tg-nrix">1.932</td>
          <td class="tg-nrix">0.8813</td>
          <td class="tg-nrix">77.34</td>
          <td class="tg-nrix">88.37</td>
          <td class="tg-nrix">75.32</td>
          <td class="tg-nrix">39.58</td>
          <td class="tg-nrix">97.25</td>
        </tr>
        <tr>
          <td class="tg-nrix">13</td>
          <td class="tg-nrix">1.932</td>
          <td class="tg-nrix">0.8825</td>
          <td class="tg-nrix">76.26</td>
          <td class="tg-nrix">89.47</td>
          <td class="tg-nrix">74.17</td>
          <td class="tg-nrix">35.42</td>
          <td class="tg-nrix">97.80</td>
        </tr>
        <tr>
          <td class="tg-nrix">14</td>
          <td class="tg-nrix">1.932</td>
          <td class="tg-nrix">0.8825</td>
          <td class="tg-nrix">76.26</td>
          <td class="tg-nrix">89.47</td>
          <td class="tg-nrix">74.17</td>
          <td class="tg-nrix">35.42</td>
          <td class="tg-nrix">97.80</td>
        </tr>
        <tr>
          <td class="tg-nrix">15</td>
          <td class="tg-nrix">1.932</td>
          <td class="tg-nrix">0.9198</td>
          <td class="tg-nrix">75.18</td>
          <td class="tg-nrix">93.55</td>
          <td class="tg-nrix">72.87</td>
          <td class="tg-nrix">30.21</td>
          <td class="tg-nrix">98.90</td>
        </tr>
        <tr>
          <td class="tg-nrix">16</td>
          <td class="tg-nrix">1.932</td>
          <td class="tg-nrix">0.9198</td>
          <td class="tg-nrix">75.18</td>
          <td class="tg-nrix">93.55</td>
          <td class="tg-nrix">72.87</td>
          <td class="tg-nrix">30.21</td>
          <td class="tg-nrix">98.90</td>
        </tr>
        <tr>
          <td class="tg-nrix">17</td>
          <td class="tg-nrix">1.932</td>
          <td class="tg-nrix">0.9241</td>
          <td class="tg-nrix">74.82</td>
          <td class="tg-nrix">93.33</td>
          <td class="tg-nrix">72.58</td>
          <td class="tg-nrix">29.17</td>
          <td class="tg-nrix">98.90</td>
        </tr>
        <tr>
          <td class="tg-nrix">18</td>
          <td class="tg-nrix">1.932</td>
          <td class="tg-nrix">0.9371</td>
          <td class="tg-nrix">74.10</td>
          <td class="tg-nrix">96.15</td>
          <td class="tg-nrix">71.83</td>
          <td class="tg-nrix">26.04</td>
          <td class="tg-nrix">99.45</td>
        </tr>
        <tr>
          <td class="tg-nrix">19</td>
          <td class="tg-nrix">1.984</td>
          <td class="tg-nrix">0.9425</td>
          <td class="tg-nrix">81.29</td>
          <td class="tg-nrix">95.83</td>
          <td class="tg-nrix">79.92</td>
          <td class="tg-nrix">31.08</td>
          <td class="tg-nrix">99.51</td>
        </tr>
        <tr>
          <td class="tg-nrix">20</td>
          <td class="tg-nrix">1.984</td>
          <td class="tg-nrix">0.9429</td>
          <td class="tg-nrix">80.58</td>
          <td class="tg-nrix">95.45</td>
          <td class="tg-nrix">79.30</td>
          <td class="tg-nrix">28.38</td>
          <td class="tg-nrix">99.51</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <br>

  <div style='margin-left: 20px; margin-top: 10px'>
    <table class="tg" table-layout="fixed" width="50%">
      <h3>FR score threshold based on magnetic resonance elastography (MRE)</h3>
      <thead>
        <tr>
          <th class="tg-0lax">MRE target threshold</th>
          <th class="tg-0lax">FR score threshold</th>
          <th class="tg-0lax">AUROC</th>
          <th class="tg-0lax">Accuracy</th>
          <th class="tg-0lax">Sensitivity</th>
          <th class="tg-0lax">Specificity</th>
          <th class="tg-0lax">PPV</th>
          <th class="tg-0lax">NPV</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="tg-c3ow">2.0</td>
          <td class="tg-c3ow">1.8</td>
          <td class="tg-c3ow">0.7167</td>
          <td class="tg-c3ow">65.17</td>
          <td class="tg-c3ow">63.75</td>
          <td class="tg-c3ow">70.39</td>
          <td class="tg-c3ow">88.81</td>
          <td class="tg-c3ow">34.52</td>
        </tr>
        <tr>
          <td class="tg-c3ow">2.5</td>
          <td class="tg-c3ow">1.851</td>
          <td class="tg-c3ow">0.7722</td>
          <td class="tg-c3ow">69.80</td>
          <td class="tg-c3ow">67.91</td>
          <td class="tg-c3ow">71.89</td>
          <td class="tg-c3ow">72.78</td>
          <td class="tg-c3ow">66.94</td>
        </tr>
        <tr>
          <td class="tg-c3ow">3.0</td>
          <td class="tg-c3ow">1.872</td>
          <td class="tg-c3ow">0.8121</td>
          <td class="tg-c3ow">72.75</td>
          <td class="tg-c3ow">77.33</td>
          <td class="tg-c3ow">70.32</td>
          <td class="tg-c3ow">58.05</td>
          <td class="tg-c3ow">85.38</td>
        </tr>
        <tr>
          <td class="tg-c3ow">3.5</td>
          <td class="tg-c3ow">1.904</td>
          <td class="tg-c3ow">0.8378</td>
          <td class="tg-c3ow">73.60</td>
          <td class="tg-c3ow">81.67</td>
          <td class="tg-c3ow">70.86</td>
          <td class="tg-c3ow">48.68</td>
          <td class="tg-c3ow">91.95</td>
        </tr>
        <tr>
          <td class="tg-c3ow">4.0</td>
          <td class="tg-c3ow">1.913</td>
          <td class="tg-c3ow">0.8513</td>
          <td class="tg-c3ow">72.89</td>
          <td class="tg-c3ow">83.69</td>
          <td class="tg-c3ow">70.23</td>
          <td class="tg-c3ow">40.97</td>
          <td class="tg-c3ow">94.58</td>
        </tr>
        <tr>
          <td class="tg-c3ow">4.5</td>
          <td class="tg-c3ow">1.936</td>
          <td class="tg-c3ow">0.8587</td>
          <td class="tg-c3ow">73.60</td>
          <td class="tg-c3ow">86.73</td>
          <td class="tg-c3ow">71.12</td>
          <td class="tg-c3ow">36.16</td>
          <td class="tg-c3ow">96.60</td>
        </tr>
        <tr>
          <td class="tg-c3ow">5.0</td>
          <td class="tg-c3ow">1.939</td>
          <td class="tg-c3ow">0.8763</td>
          <td class="tg-c3ow">72.47</td>
          <td class="tg-c3ow">90.59</td>
          <td class="tg-c3ow">70.02</td>
          <td class="tg-c3ow">29.06</td>
          <td class="tg-c3ow">98.21</td>
        </tr>
        <tr>
          <td class="tg-c3ow">5.5</td>
          <td class="tg-c3ow">2.005</td>
          <td class="tg-c3ow">0.8836</td>
          <td class="tg-c3ow">75.00</td>
          <td class="tg-c3ow">84.75</td>
          <td class="tg-c3ow">74.12</td>
          <td class="tg-c3ow">22.83</td>
          <td class="tg-c3ow">98.17</td>
        </tr>
        <tr>
          <td class="tg-c3ow">6.0</td>
          <td class="tg-c3ow">2.005</td>
          <td class="tg-c3ow">0.8863</td>
          <td class="tg-c3ow">74.44</td>
          <td class="tg-c3ow">89.36</td>
          <td class="tg-c3ow">73.38</td>
          <td class="tg-c3ow">19.18</td>
          <td class="tg-c3ow">98.99</td>
        </tr>
        <tr>
          <td class="tg-c3ow">6.5</td>
          <td class="tg-c3ow">2.015</td>
          <td class="tg-c3ow">0.9067</td>
          <td class="tg-c3ow">74.86</td>
          <td class="tg-c3ow">92.11</td>
          <td class="tg-c3ow">73.89</td>
          <td class="tg-c3ow">16.59</td>
          <td class="tg-c3ow">99.40</td>
        </tr>
        <tr>
          <td class="tg-c3ow">7.0</td>
          <td class="tg-c3ow">2.015</td>
          <td class="tg-c3ow">0.8966</td>
          <td class="tg-c3ow">73.74</td>
          <td class="tg-c3ow">90.00</td>
          <td class="tg-c3ow">73.02</td>
          <td class="tg-c3ow">12.80</td>
          <td class="tg-c3ow">99.40</td>
        </tr>
      </tbody>
      </table>
    </div>
</body>
</html>