<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>FR score calculator</title>

  <style type="text/css">
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg .tg-baqh{text-align:center;vertical-align:top}
  </style>

  <!-- Quick Start: CSS -->

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" ></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>


  <!-- Nav Bar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Fibrosis Risk Score calculator</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>

</head>
  
<body>
  <div class="inputs" style='margin-left: 20px; margin-top: 10px'>
    <h2>Submit your data</h2>
    <p>
      Introduce the AST, ALT, PLT score, and ultrasonography images <b>(png or jpg)</b>
      <br>
      <br>
      For stable prediction, 
      <br>
      - upload at least five images of ultrasonography images of a single patient.
      <br>
      - the range of AST, and ALT is 10~100. If the score exceeds the range, would be adjusted.
    </p>
      <!-- Inputs for our ML model -->
      <form action="{{ url_for('predict')}}" method="post" enctype="multipart/form-data">
        <input type="text" name="Age" placeholder="Age (optional)">
        <input type="text" name="AST" placeholder="AST (U/L)" required="required">
        <input type="text" name="ALT" placeholder="ALT (U/L)" required="required">
        <input type="text" name="PLT" placeholder="PLT (10^9/L)" required="required">
        <br>
        <br>
        <input type="file" name="file" accept="image/png, image/jpeg" style="width: 662px" multiple>
        <button type="submit" class="btn btn-primary btn-block btn-large">Submit</button>
      </form>
      <br>
      <br>
      <h3>FR score report</h3>
      <br>
      {{ session_id }}
      <br>
      <b> {{ prediction_text }} </b>
      <br>
      {{ fib4_metric }}
      <br>
      {{ apri_metric }} 
   </div>

   <br>

   <div style='margin-left: 20px; margin-top: 10px'>
    <h3>FR score threshold based on transient elastography (TE)</h3>
    <table class="tg" table-layout="fixed" width="50%">
      <thead>
        <tr>
          <th class="tg-0lax">TE target threshold</th>
          <th class="tg-0lax">FR score threshold</th>
          <th class="tg-0lax">AUROC</th>
          <th class="tg-0lax">Accuracy</th>
          <th class="tg-0lax">Sensitivity</th>
          <th class="tg-0lax">Specificity</th>
          <th class="tg-0lax">PPV</th>
          <th class="tg-0lax">NPV</th>
        </tr>
      </thead>

    </table>
  </div>
  
  <br>

  <div style='margin-left: 20px; margin-top: 10px'>
    <table class="tg" table-layout="fixed" width="50%">
      <h3>FR score threshold based on magnetic resonance elastography (MRE)</h3>
      <thead>
        <tr>
          <th class="tg-0lax">MRE target threshold</th>
          <th class="tg-0lax">FR score threshold</th>
          <th class="tg-0lax">AUROC</th>
          <th class="tg-0lax">Accuracy</th>
          <th class="tg-0lax">Sensitivity</th>
          <th class="tg-0lax">Specificity</th>
          <th class="tg-0lax">PPV</th>
          <th class="tg-0lax">NPV</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="tg-0pky">2.0</td>
          <td class="tg-0pky">1.043</td>
          <td class="tg-0pky">0.725</td>
          <td class="tg-0pky">65.24</td>
          <td class="tg-0pky">63.38</td>
          <td class="tg-0pky">70.47</td>
          <td class="tg-0pky">88.92</td>
          <td class="tg-0pky">34.43</td>
        </tr>
        <tr>
          <td class="tg-0pky">2.5</td>
          <td class="tg-0pky">1.110</td>
          <td class="tg-0pky">0.777</td>
          <td class="tg-0pky">69.66</td>
          <td class="tg-0pky">69.29</td>
          <td class="tg-0pky">70.06</td>
          <td class="tg-0pky">71.83</td>
          <td class="tg-0pky">67.44</td>
        </tr>
        <tr>
          <td class="tg-0pky">3.0</td>
          <td class="tg-0pky">1.190</td>
          <td class="tg-0pky">0.816</td>
          <td class="tg-0pky">72.79</td>
          <td class="tg-0pky">77.46</td>
          <td class="tg-0pky">70.31</td>
          <td class="tg-0pky">58.15</td>
          <td class="tg-0pky">85.41</td>
        </tr>
        <tr>
          <td class="tg-0pky">3.5</td>
          <td class="tg-0pky">1.250</td>
          <td class="tg-0pky">0.844</td>
          <td class="tg-0pky">74.22</td>
          <td class="tg-0pky">82.68</td>
          <td class="tg-0pky">71.32</td>
          <td class="tg-0pky">49.66</td>
          <td class="tg-0pky">92.33</td>
        </tr>
        <tr>
          <td class="tg-0pky">4.0</td>
          <td class="tg-0pky">1.280</td>
          <td class="tg-0pky">0.859</td>
          <td class="tg-0pky">73.50</td>
          <td class="tg-0pky">85.00</td>
          <td class="tg-0pky">70.64</td>
          <td class="tg-0pky">41.90</td>
          <td class="tg-0pky">94.98</td>
        </tr>
        <tr>
          <td class="tg-0pky">4.5</td>
          <td class="tg-0pky">1.311</td>
          <td class="tg-0pky">0.872</td>
          <td class="tg-0pky">74.07</td>
          <td class="tg-0pky">87.50</td>
          <td class="tg-0pky">71.53</td>
          <td class="tg-0pky">36.84</td>
          <td class="tg-0pky">96.79</td>
        </tr>
        <tr>
          <td class="tg-0pky">5.0</td>
          <td class="tg-0pky">1.394</td>
          <td class="tg-0pky">0.891</td>
          <td class="tg-0pky">74.93</td>
          <td class="tg-0pky">89.41</td>
          <td class="tg-0pky">72.93</td>
          <td class="tg-0pky">31.28</td>
          <td class="tg-0pky">98.04</td>
        </tr>
        <tr>
          <td class="tg-0pky">5.5</td>
          <td class="tg-0pky">1.394</td>
          <td class="tg-0pky">0.897</td>
          <td class="tg-0pky">72.36</td>
          <td class="tg-0pky">91.53</td>
          <td class="tg-0pky">70.61</td>
          <td class="tg-0pky">22.22</td>
          <td class="tg-0pky">98.91</td>
        </tr>
        <tr>
          <td class="tg-0pky">6.0</td>
          <td class="tg-0pky">1.429</td>
          <td class="tg-0pky">0.905</td>
          <td class="tg-0pky">73.08</td>
          <td class="tg-0pky">93.62</td>
          <td class="tg-0pky">71.60</td>
          <td class="tg-0pky">19.13</td>
          <td class="tg-0pky">99.36</td>
        </tr>
        <tr>
          <td class="tg-0pky">6.5</td>
          <td class="tg-0pky">1.429</td>
          <td class="tg-0pky">0.924</td>
          <td class="tg-0pky">72.36</td>
          <td class="tg-0pky">97.37</td>
          <td class="tg-0pky">70.93</td>
          <td class="tg-0pky">16.09</td>
          <td class="tg-0pky">99.79</td>
        </tr>
        <tr>
          <td class="tg-0pky">7.0</td>
          <td class="tg-0pky">1.429</td>
          <td class="tg-0pky">0.909</td>
          <td class="tg-0pky">71.23</td>
          <td class="tg-0pky">96.67</td>
          <td class="tg-0pky">70.09</td>
          <td class="tg-0pky">12.61</td>
          <td class="tg-0pky">99.79</td>
        </tr>
      </tbody>
      </table>
    </div>
</body>
</html>
