<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>FR score calculator</title>

  <style type="text/css">
    .tg  {border-collapse:collapse;border-spacing:0;}
    .tg td{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg th{border-color:black;border-style:solid;border-width:1px;font-family:Arial, sans-serif;font-size:14px;
      font-weight:normal;overflow:hidden;padding:10px 5px;word-break:normal;}
    .tg .tg-baqh{text-align:center;vertical-align:top}
  </style>

  <!-- Quick Start: CSS -->

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.9.2/dist/umd/popper.min.js" ></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/js/bootstrap.min.js" integrity="sha384-Atwg2Pkwv9vp0ygtn1JAojH0nYbwNJLPhwyoVbhoPwBhjQPR5VtM2+xf0Uwh9KtT" crossorigin="anonymous"></script>


  <!-- Nav Bar -->
  <nav class="navbar navbar-expand-lg navbar-dark bg-dark">
    <div class="container-fluid">
      <a class="navbar-brand" href="#">Fibrosis Risk Score calculator</a>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    </div>
  </nav>

</head>
  
<body>
  <div class="inputs" style='margin-left: 20px; margin-top: 10px'>
    <h2>Submit your data</h2>
    <p>
      Introduce the AST, ALT, PLT score, and ultrasonography images <b>(png or jpg)</b>
      <br>
      <br>
      For stable prediction, 
      <br>
      - upload at least five images of ultrasonography images of a single patient.
      <br>
      - the range of AST, and ALT is 10~100. If the score exceeds the range, would be adjusted.
    </p>
      <!-- Inputs for our ML model -->
      <form action="{{ url_for('predict')}}" method="post" enctype="multipart/form-data">
        <input type="text" name="Age" placeholder="Age (optional)">
        <input type="text" name="AST" placeholder="AST (U/L)" required="required">
        <input type="text" name="ALT" placeholder="ALT (U/L)" required="required">
        <input type="text" name="PLT" placeholder="PLT (10^9/L)" required="required">
        <br>
        <br>
        <input type="file" name="file" accept="image/png, image/jpeg" style="width: 662px" multiple>
        <button type="submit" class="btn btn-primary btn-block btn-large">Submit</button>
      </form>
      <br>
      <br>
      <h3>FR score report</h3>
      <br>
      {{ session_id }}
      <br>
      <b> {{ prediction_text }} </b>
      <br>
      {{ fib4_metric }}
      <br>
      {{ apri_metric }} 
   </div>

   <br>

   <div style='margin-left: 20px; margin-top: 10px'>
    <h3>FR score threshold based on transient elastography (TE)</h3>
    <table class="tg" table-layout="fixed" width="70%">
      <thead>
        <tr>
          <th class="tg-baqh" width="10%">TE target</th>
          <th class="tg-baqh" width="10%">FR score threshold</th>
          <th class="tg-baqh" width="10%">Accuracy</th>
          <th class="tg-baqh" width="10%">Sensitivity</th>
          <th class="tg-baqh" width="10%">Specificity</th>
          <th class="tg-baqh" width="10%">PPV</th>
          <th class="tg-baqh" width="10%">NPV</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="tg-baqh">6</td>
          <td class="tg-baqh">1.8677</td>
          <td class="tg-baqh">0.6957</td>
          <td class="tg-baqh">0.6587</td>
          <td class="tg-baqh">0.7267</td>
          <td class="tg-baqh">0.6694</td>
          <td class="tg-baqh">0.7171</td>
        </tr>
        <tr>
          <td class="tg-baqh">7</td>
          <td class="tg-baqh">1.8677</td>
          <td class="tg-baqh">0.6993</td>
          <td class="tg-baqh">0.7071</td>
          <td class="tg-baqh">0.6949</td>
          <td class="tg-baqh">0.5645</td>
          <td class="tg-baqh">0.8092</td>
        </tr>
        <tr>
          <td class="tg-baqh">8</td>
          <td class="tg-baqh">1.9540</td>
          <td class="tg-baqh">0.7717</td>
          <td class="tg-baqh">0.6585</td>
          <td class="tg-baqh">0.8196</td>
          <td class="tg-baqh">0.6067</td>
          <td class="tg-baqh">0.8503</td>
        </tr>
        <tr>
          <td class="tg-baqh">9</td>
          <td class="tg-baqh">1.9540</td>
          <td class="tg-baqh">0.7826</td>
          <td class="tg-baqh">0.7042</td>
          <td class="tg-baqh">0.8098</td>
          <td class="tg-baqh">0.5618</td>
          <td class="tg-baqh">0.8877</td>
        </tr>
        <tr>
          <td class="tg-baqh">10</td>
          <td class="tg-baqh">1.9582</td>
          <td class="tg-baqh">0.7971</td>
          <td class="tg-baqh">0.7541</td>
          <td class="tg-baqh">0.8093</td>
          <td class="tg-baqh">0.5287</td>
          <td class="tg-baqh">0.9206</td>
        </tr>
        <tr>
          <td class="tg-baqh">11</td>
          <td class="tg-baqh">1.9582</td>
          <td class="tg-baqh">0.7935</td>
          <td class="tg-baqh">0.8000</td>
          <td class="tg-baqh">0.7920</td>
          <td class="tg-baqh">0.4598</td>
          <td class="tg-baqh">0.9471</td>
        </tr>
        <tr>
          <td class="tg-baqh">12</td>
          <td class="tg-baqh">1.9582</td>
          <td class="tg-baqh">0.8007</td>
          <td class="tg-baqh">0.8810</td>
          <td class="tg-baqh">0.7863</td>
          <td class="tg-baqh">0.4253</td>
          <td class="tg-baqh">0.9735</td>
        </tr>
        <tr>
          <td class="tg-baqh">13</td>
          <td class="tg-baqh">1.9582</td>
          <td class="tg-baqh">0.7899</td>
          <td class="tg-baqh">0.8919</td>
          <td class="tg-baqh">0.7741</td>
          <td class="tg-baqh">0.3793</td>
          <td class="tg-baqh">0.9788</td>
        </tr>
        <tr>
          <td class="tg-baqh">14</td>
          <td class="tg-baqh">1.9582</td>
          <td class="tg-baqh">0.7899</td>
          <td class="tg-baqh">0.8919</td>
          <td class="tg-baqh">0.7741</td>
          <td class="tg-baqh">0.3793</td>
          <td class="tg-baqh">0.9788</td>
        </tr>
        <tr>
          <td class="tg-baqh">15</td>
          <td class="tg-baqh">1.9582</td>
          <td class="tg-baqh">0.7790</td>
          <td class="tg-baqh">0.9333</td>
          <td class="tg-baqh">0.7602</td>
          <td class="tg-baqh">0.3218</td>
          <td class="tg-baqh">0.9894</td>
        </tr>
        <tr>
          <td class="tg-baqh">16</td>
          <td class="tg-baqh">1.9582</td>
          <td class="tg-baqh">0.7790</td>
          <td class="tg-baqh">0.9333</td>
          <td class="tg-baqh">0.7602</td>
          <td class="tg-baqh">0.3218</td>
          <td class="tg-baqh">0.9894</td>
        </tr>
        <tr>
          <td class="tg-baqh">17</td>
          <td class="tg-baqh">2.1139</td>
          <td class="tg-baqh">0.8768</td>
          <td class="tg-baqh">0.8276</td>
          <td class="tg-baqh">0.8826</td>
          <td class="tg-baqh">0.4528</td>
          <td class="tg-baqh">0.9776</td>
        </tr>
        <tr>
          <td class="tg-baqh">18</td>
          <td class="tg-baqh">2.1139</td>
          <td class="tg-baqh">0.8804</td>
          <td class="tg-baqh">0.8846</td>
          <td class="tg-baqh">0.8800</td>
          <td class="tg-baqh">0.4340</td>
          <td class="tg-baqh">0.9866</td>
        </tr>
        <tr>
          <td class="tg-baqh">19</td>
          <td class="tg-baqh">2.1139</td>
          <td class="tg-baqh">0.8804</td>
          <td class="tg-baqh">0.9167</td>
          <td class="tg-baqh">0.8770</td>
          <td class="tg-baqh">0.4151</td>
          <td class="tg-baqh">0.9910</td>
        </tr>
        <tr>
          <td class="tg-baqh">20</td>
          <td class="tg-baqh">2.1452</td>
          <td class="tg-baqh">0.8986</td>
          <td class="tg-baqh">0.9091</td>
          <td class="tg-baqh">0.8976</td>
          <td class="tg-baqh">0.4348</td>
          <td class="tg-baqh">0.9913</td>
        </tr>
      </tbody>
    </table>
  </div>
  
  <br>

  <div style='margin-left: 20px; margin-top: 10px'>
    <table class="tg" table-layout="fixed" width="70%">
      <h3>FR score threshold based on magnetic resonance elastography (MRE)</h3>
      <thead>
        <tr>
          <th class="tg-baqh" width="10%">MRE target</th>
          <th class="tg-baqh" width="10%">FR score threshold</th>
          <th class="tg-baqh" width="10%">Accuracy</th>
          <th class="tg-baqh" width="10%">Sensitivity</th>
          <th class="tg-baqh" width="10%">Specificity</th>
          <th class="tg-baqh" width="10%">PPV</th>
          <th class="tg-baqh" width="10%">NPV</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td class="tg-baqh">2.0</td>
          <td class="tg-baqh">1.8074</td>
          <td class="tg-baqh">0.6581</td>
          <td class="tg-baqh">0.6456</td>
          <td class="tg-baqh">0.7047</td>
          <td class="tg-baqh">0.8903</td>
          <td class="tg-baqh">0.3488</td>
        </tr>
        <tr>
          <td class="tg-baqh">2.5</td>
          <td class="tg-baqh">1.9315</td>
          <td class="tg-baqh">0.7108</td>
          <td class="tg-baqh">0.6005</td>
          <td class="tg-baqh">0.8323</td>
          <td class="tg-baqh">0.7978</td>
          <td class="tg-baqh">0.6541</td>
        </tr>
        <tr>
          <td class="tg-baqh">3.0</td>
          <td class="tg-baqh">1.9392</td>
          <td class="tg-baqh">0.7678</td>
          <td class="tg-baqh">0.7213</td>
          <td class="tg-baqh">0.7926</td>
          <td class="tg-baqh">0.6494</td>
          <td class="tg-baqh">0.8422</td>
        </tr>
        <tr>
          <td class="tg-baqh">3.5</td>
          <td class="tg-baqh">1.9392</td>
          <td class="tg-baqh">0.7635</td>
          <td class="tg-baqh">0.7933</td>
          <td class="tg-baqh">0.7533</td>
          <td class="tg-baqh">0.5240</td>
          <td class="tg-baqh">0.9142</td>
        </tr>
        <tr>
          <td class="tg-baqh">4.0</td>
          <td class="tg-baqh">1.9430</td>
          <td class="tg-baqh">0.7493</td>
          <td class="tg-baqh">0.8286</td>
          <td class="tg-baqh">0.7295</td>
          <td class="tg-baqh">0.4328</td>
          <td class="tg-baqh">0.9447</td>
        </tr>
        <tr>
          <td class="tg-baqh">4.5</td>
          <td class="tg-baqh">1.9430</td>
          <td class="tg-baqh">0.7379</td>
          <td class="tg-baqh">0.8750</td>
          <td class="tg-baqh">0.7119</td>
          <td class="tg-baqh">0.3657</td>
          <td class="tg-baqh">0.9677</td>
        </tr>
        <tr>
          <td class="tg-baqh">5.0</td>
          <td class="tg-baqh">1.9430</td>
          <td class="tg-baqh">0.7194</td>
          <td class="tg-baqh">0.9176</td>
          <td class="tg-baqh">0.6921</td>
          <td class="tg-baqh">0.2910</td>
          <td class="tg-baqh">0.9839</td>
        </tr>
        <tr>
          <td class="tg-baqh">5.5</td>
          <td class="tg-baqh">1.9430</td>
          <td class="tg-baqh">0.7194</td>
          <td class="tg-baqh">0.9176</td>
          <td class="tg-baqh">0.6921</td>
          <td class="tg-baqh">0.2910</td>
          <td class="tg-baqh">0.9839</td>
        </tr>
        <tr>
          <td class="tg-baqh">6.0</td>
          <td class="tg-baqh">2.0168</td>
          <td class="tg-baqh">0.7436</td>
          <td class="tg-baqh">0.8936</td>
          <td class="tg-baqh">0.7328</td>
          <td class="tg-baqh">0.1936</td>
          <td class="tg-baqh">0.9897</td>
        </tr>
        <tr>
          <td class="tg-baqh">6.5</td>
          <td class="tg-baqh">2.0692</td>
          <td class="tg-baqh">0.7877</td>
          <td class="tg-baqh">0.8947</td>
          <td class="tg-baqh">0.7816</td>
          <td class="tg-baqh">0.1899</td>
          <td class="tg-baqh">0.9924</td>
        </tr>
        <tr>
          <td class="tg-baqh">7.0</td>
          <td class="tg-baqh">2.1364</td>
          <td class="tg-baqh">0.8191</td>
          <td class="tg-baqh">0.8667</td>
          <td class="tg-baqh">0.8170</td>
          <td class="tg-baqh">0.1745</td>
          <td class="tg-baqh">0.9928</td>
        </tr>
      </tbody>
      </table>
    </div>

</body>
</html>